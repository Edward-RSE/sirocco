<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started &mdash; python 88a documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="_static/sg_gallery.css" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Running Python" href="running_python.html" />
    <link rel="prev" title="Quick Guide to Python" href="quick.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            python
          </a>
              <div class="version">
                88
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick.html"><em>Quick Guide to Python</em></a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_python.html">Running Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="input.html">Inputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="output.html">Outputs &amp; Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">Plotting &amp; Processing Outputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="operation.html">Code Operation</a></li>
<li class="toctree-l1"><a class="reference internal" href="radiation.html">Radiation Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="wind_models.html">Wind Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="coordinate.html">Coordinate grids</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="physics.html">Physics &amp; Radiative Transfer</a></li>
<li class="toctree-l1"><a class="reference internal" href="atomic.html">Atomic Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="meta.html">Meta-documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer.html">Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="py_progs.html">Python Scripts</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">python</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Getting Started</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/installation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading"></a></h1>
<p>What machines will python run on? We have run python various versions of linux and on Mac.
It is compiled using mpicc, with an option to compile with gcc.</p>
<p>It uses the Gnu Scientific Libraries (gsl)</p>
<p>(Developers should also have cproto in their path in order to create new prototypes, and access to indent to insure that routines are formatted in a standard fashion. They will also want to make sure the py_progs routines are properly installed, as indicated below).</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h2>
<p>Python and the various routines associated are set up in a self-contained directory structure.
The basic directory structure and the data files that one needs to run Python need to be retrieved and compiled.</p>
<p>If you want to obtain a stable (!) release, go to the <a class="reference external" href="https://github.com/agnwinds/python/releases/">Releases</a> page.</p>
<p>If you want to download the latest dev version, you can zip up the git repository by clicking on the zip icon to the right of the GitHub page.
Alternatively, clone it directly as</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/agnwinds/python.git
</pre></div>
</div>
<p>If you anticipate contributing to development we suggest Forking the repository and submitting pull requests with any proposed changes.</p>
<p>Once you have the files, you need to cd to the new directory and set your environment variables</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">PYTHON</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>/path/to/python/
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span><span class="nv">$PYTHON</span>
$<span class="w"> </span>./configure
$<span class="w"> </span>make<span class="w"> </span>install
$<span class="w"> </span>make<span class="w"> </span>clean
</pre></div>
</div>
<p>One can run a more rigorous clean of GSL with <code class="code docutils literal notranslate"><span class="pre">make</span> <span class="pre">distclean</span></code>, or remove the compiled GSL libraries altogether with <code class="code docutils literal notranslate"><span class="pre">make</span> <span class="pre">rm_lib</span></code>.</p>
<p>note that export syntax is for bash- for csh use</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>setenv<span class="w"> </span>PYTHON<span class="w"> </span>/path/to/python/
</pre></div>
</div>
<p>The atomic data needed to run Python is included in the distribution.</p>
<p>(Python is updated fairly ofen.  Normally, one does not need to redo the entire installation proces.   Insstead follow the instuctions in <span class="xref std std-doc">updating</span> )</p>
</section>
<section id="running-python">
<h2>Running python<a class="headerlink" href="#running-python" title="Permalink to this heading"></a></h2>
<p>To run python you need to add the following to your $PATH variable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">$PYTHON</span>/bin
</pre></div>
</div>
<p>You can then setup your symbolic links by running</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>Setup_Py_Dir
</pre></div>
</div>
<p>and run the code by typing, e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>py<span class="w"> </span>root.pf
</pre></div>
</div>
<section id="running-in-parallel-mode">
<h3>Running in parallel mode<a class="headerlink" href="#running-in-parallel-mode" title="Permalink to this heading"></a></h3>
<p>While Python can be run in single processor mode, it is generally more efficient to run on multiple processors. in multiprocessor mode,
When multiprocessing is invoked, Python uses mulitple threads for photon transfer and in calcuation ionization equilibrium.  As these
comprise the bulk of the computational load the total time to run is  roughly an inverse of the number of threads.  Python uses <a class="reference external" href="https://en.wikipedia.org/wiki/Message_Passing_Interface">MPI</a> for parallel processing and so software libraries that implement this must be on the machine that is
being used.  For Macs, mpi can installed with HomeBrew or Fink.  For linux machines, two common libraries are <a class="reference external" href="https://www.open-mpi.org/">Open-MPI</a> and <a class="reference external" href="https://www.mpich.org/">MPICH</a>  If not already installed, one should
install them.</p>
<p>With mpi installed (and after recompiling with mpicc, which is the default) one would simply run the above program with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mpirun<span class="w"> </span>-np<span class="w"> </span><span class="m">8</span><span class="w">  </span>py<span class="w"> </span>root.pf
</pre></div>
</div>
<p>where  -np followed by a number designates the number of threads assigned.</p>
</section>
<section id="auxiliary-programs">
<h3>Auxiliary programs<a class="headerlink" href="#auxiliary-programs" title="Permalink to this heading"></a></h3>
<p>There are two programs that are useful for extracting information about models</p>
<ul class="simple">
<li><p>windsave2table generates a series of astropy tables that can be used to inspect elements of the various models, including densities of specific ions</p></li>
<li><p>py_wind is a mainly interactive routine that prints similar infomation to the screen.</p></li>
</ul>
<p>The two files are run as follows</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>windsave2table<span class="w"> </span>root
$<span class="w"> </span>py_wind<span class="w"> </span>root
</pre></div>
</div>
<p>Brief descriptions of command line options for running these routines can obtained using a -h switch</p>
</section>
<section id="python-scripts">
<h3>Python scripts<a class="headerlink" href="#python-scripts" title="Permalink to this heading"></a></h3>
<p>There are a number of python, the progamming language scripts, that can be used to plot results
from a Python run.  These are not particularly well documented and many have been developed
for looking at various aspects of the code.  A few may require python packages to be installed.
However, a number are likely to be useful.</p>
<p>To make use of these scipts one should add</p>
<p>$PYTHON/py_progs both to the PATH and PYTHONPATH variables</p>
<p>One script that is particularly useful is run_check.py, which is run as follows</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">$run_check</span>.py<span class="w"> </span>root
</pre></div>
</div>
<p>This should create an html file that contains a summary set of information about a run, with plots that
indicate how much of the wind has converged as a function of cycle, which cells have converged at the end, what
the electron and temperature structrue of the wind is, as well as quick plots of the spectra that were produced.</p>
</section>
<section id="directory-structure">
<h3>Directory structure<a class="headerlink" href="#directory-structure" title="Permalink to this heading"></a></h3>
<p>The python directory structure is fairly simple:</p>
<dl class="simple">
<dt>source</dt><dd><p>Location of source code</p>
</dd>
<dt>bin</dt><dd><p>Location of executables</p>
</dd>
<dt>docs</dt><dd><p>Location of documentation, including sphinx docs, doxygen, parameters and documentation for the python programs in py_progs.</p>
</dd>
<dt>data</dt><dd><p>Location for all datafiles. Files that are mainly for reference should be gzipped to save space. Such files are not recreated in</p>
</dd>
<dt>bin</dt><dd><p>The location of the executables. (It is a good idea to put this directory in your path)</p>
</dd>
<dt>software</dt><dd><p>This directory contains libraries which are used in in python that must be recompiled when creating an installation on a new machine, primarily Bill Pence’s cfitsio package and the GNU scientific library gsl</p>
</dd>
<dt>py_progs</dt><dd><p>python programs for helping analyse the code. We recommend adding this directory to your PATH and PYTHON_PATH environment variables.</p>
</dd>
<dt>examples</dt><dd><p>A directory with a few examples of python runs. (Note that the input files will have changed and so one may not be able to run these examples without some changes in the input files.)</p>
</dd>
</dl>
</section>
<section id="please-help-by-reporting-bugs-in-installation">
<h3>Please help by reporting bugs in installation<a class="headerlink" href="#please-help-by-reporting-bugs-in-installation" title="Permalink to this heading"></a></h3>
<p>This can be done by submitting a bug under the <a class="reference external" href="https://github.com/agnwinds/python/issues/">Issues</a> page</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quick.html" class="btn btn-neutral float-left" title="Quick Guide to Python" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="running_python.html" class="btn btn-neutral float-right" title="Running Python" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-2024, Knox Long, Christian Knigge, Stuart Sim, Nick Higginbottom, James Matthews, Sam Mangham, Edward Parkinson, Mandy Hewitt, Nicolas Scepi, Austen Wallis, Amin Mosallanezhad.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>